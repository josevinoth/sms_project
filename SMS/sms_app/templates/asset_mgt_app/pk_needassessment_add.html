{% extends "asset_mgt_app/base.html" %}
{% load widget_tweaks %}
{% block content %}

<form method="POST" action="" id="needassessment_add"   >
	{% csrf_token %}
	<div class="row">
		<div class="col-3"></div>
		<div class="col-6">
			<div class="container-fluid">
				<div class="card text-white bg-info mb-3" style="max-width: 100%;">
					<div class="card-header text-center"><h3>Add/Update Need Assessment</h3></div>
					<div class="card-body bg-light" >
						<div class="row">
							<div class="col-6">
								<div class="input-group input-group-sm mb-3">
									<div class="input-group-prepend">
										<span class="input-group-text">Assessment NO.</span>
									</div>
									{% render_field form.na_assessment_num id="na_assessment_num"  readonly="True"  class="form-control" %}
								</div>
								<div class="input-group input-group-sm mb-3">
									<div class="input-group-prepend">
										<span class="input-group-text">Date</span>
									</div>
									{% render_field form.na_date id="na_date" type="Date" class="form-control" %}
								</div>
								<div class="input-group input-group-sm mb-3">
									<div class="input-group-prepend">
										<span class="input-group-text">Customer Name</span>
									</div>
									{% render_field form.na_customer_name id="na_customer_name" class="form-control " %}
								</div>
								<div class="input-group input-group-sm mb-3">
									<div class="input-group-prepend">
										<span class="input-group-text">Job Weight</span>
									</div>
									{% render_field form.na_job_weight id="na_job_weight" class="form-control " %}
								</div>
								<div class="input-group input-group-sm mb-3">
									<div class="input-group-prepend">
										<span class="input-group-text">Type Of Work</span>
									</div>
									{% render_field form.na_type_of_work id="na_type_of_work" class="form-control " %}
								</div>
								<div class="input-group input-group-sm mb-3">
									<div class="input-group-prepend">
										<span class="input-group-text">Type Of Packing</span>
									</div>
									{% render_field form.na_type_of_pack id="na_type_of_pack" class="form-control " %}
								</div>
								<div class="input-group input-group-sm mb-3">
									<div class="input-group-prepend">
										<span class="input-group-text">Type Of Requirements</span>
									</div>
									{% render_field form.na_type_of_req id="na_type_of_req" class="form-control " %}
								</div>
								<div class="input-group input-group-sm mb-3">
									<div class="input-group-prepend">
										<span class="input-group-text">Plywood Thickness</span>
									</div>
									{% render_field form.na_plywood_thickness id="na_plywood_thickness" class="form-control " %}
								</div>
							</div>
							<div class="col-6">
								<div class="input-group input-group-sm mb-3">
									<div class="input-group-prepend">
										<span class="input-group-text">Type Of Plywood</span>
									</div>
									{% render_field form.na_type_of_plywood id="na_type_of_plywood" class="form-control " %}
								</div>
								<div class="input-group input-group-sm mb-3">
									<div class="input-group-prepend">
										<span class="input-group-text">Wood Treatment Requirement</span>
									</div>
									{% render_field form.na_wood_treatment_req  id="na_wood_treatment_req" class="form-control " %}
								</div>
								<div class="input-group input-group-sm mb-3">
									<div class="input-group-prepend">
										<span class="input-group-text">Type of Wood</span>
									</div>
									{% render_field form.na_type_of_wood id="na_type_of_wood" class="form-control " %}
								</div>

								<div class="input-group input-group-sm mb-3">
									<div class="input-group-prepend">
										<span class="input-group-text">Unloading</span>
									</div>
									{% render_field form.na_unloading id="na_unloading" class="form-control " %}
								</div>
								<div class="input-group input-group-sm mb-3">
									<div class="input-group-prepend">
										<span class="input-group-text">Wood Norms</span>
									</div>
									{% render_field form.na_wood_norms id="na_wood_norms"  class="form-control " %}
								</div>
								<div class="input-group input-group-sm mb-3">
									<div class="input-group-prepend">
										<span class="input-group-text">Vehicle</span>
									</div>
									{% render_field form.na_vehicle id="na_vehicle" class="form-control " %}
								</div>
								<div class="input-group input-group-sm mb-3">
									<div class="input-group-prepend">
										<span class="input-group-text">Vehicle Type</span>
									</div>
									{% render_field form.na_vehicle_type id="na_vehicle_type" class="form-control " %}
								</div>
								<div class="input-group input-group-sm mb-3">
									<div class="input-group-prepend">
										<span class="input-group-text">Type Of Access</span>
									</div>
									{% render_field form.na_type_of_access id="na_type_of_access" class="form-control " %}
								</div>
								<div class="input-group input-group-sm mb-3">
									<div class="input-group-prepend">
										<span class="input-group-text">Consumables</span>
									</div>
									{% render_field form.na_consumables id="na_consumables" class="form-control " %}
								</div>

								{% render_field form.na_updated_by id="na_updated_by" hidden="True" class="form-control " %}
							</div>
						</div>
						<div class="row container-fluid">
							<div class="input-group input-group-sm mb-3 ">
								<div class="input-group-prepend">
									<span class="input-group-text">Remarks</span>
								</div>
								{% render_field form.na_remarks id="na_remarks" class="form-control " %}
							</div>
						</div>
						<div class="row">
							<div class="col-1"></div>
							<div class="col-10">
								<div class="message text-center">
									{% for message in messages %}
									<a {% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</a>
									{% endfor %}
								</div>
							</div>
							<div class="col-1"></div>
						</div>
						<button type="submit" class="btn btn-success "><i class="fas fa-check"></i> Submit</button>
						<a href="{% url 'needassessment_list' %}" class="btn btn-danger float-right">
							<i class="fas fa-times"></i> Cancel
						</a>
					</div>
				</div>
			</div>
		</div>
		<div class="col-3"></div>
	</div>
</form>
<div class="container-fluid row">
    <div class="col-md-1">
          <a href="{% url 'na_dimension_insert' %}" id = "add_dim_btn" class="btn btn-success btn-block btn-lg disable_a_href">
            <i class="fas fa-plus"></i> Insert
          </a>
        </div>
</div>
<hr>
<div class="container-fluid">
    <table  id="na_dimension_list" class="table table-striped table-bordered">
        <thead class="thead-dark">
        <tr>
            <th>Created On</th>
            <th>Assessment Number</th>
            <th>Item Name</th>
            <th>Length</th>
            <th>Width</th>
            <th>Height</th>
            <th>Quantity</th>
            <th>Updated On</th>
            <th>Updated By</th>
            <th>Edit</th>
            <th>Delete</th>
        </thead>
        <tbody>
        {% for na_dimensioninfo in na_dimension_list %}
        <tr>
            <td> {{na_dimensioninfo.nad_created_at}}</td>
            <td> {{na_dimensioninfo.nad_assess_num}}</td>
            <td> {{na_dimensioninfo.nad_item_name}}</td>
            <td> {{na_dimensioninfo.nad_length}}</td>
            <td> {{na_dimensioninfo.nad_width}}</td>
            <td> {{na_dimensioninfo.nad_height}}</td>
            <td> {{na_dimensioninfo.nad_quantity}}</td>
            <td> {{na_dimensioninfo.nad_updated_at}}</td>
            <td> {{na_dimensioninfo.nad_updated_by}}</td>
			<td>
                <a class="btn btn-primary" href="{% url 'na_dimension_update' na_dimensioninfo.id %}" class="btn btn-primary">
                    <i class="far fa-edit"></i>
                </a>
            </td>
            <td>
                <form action="{% url 'na_dimension_delete' na_dimensioninfo.id %}" method="post" onclick="return confirm('Are you sure?');">
                    {% csrf_token %}
                    <button type="submit" class="btn btn-danger">
                        <i class="fas fa-trash-alt"></i>
                    </button>
                </form>
            </td>
        </tr>
        {% endfor %}
        </tbody>
    </table>
</div>


<script>
    $(document).ready(function() {
    document.getElementById("na_updated_by").value ='{{user_id}}';
    $('#na_dimension_list').DataTable({
        dom: 'lBfrtip',
        buttons: [
            'copy', 'csv', 'excel','print'
        ]
    });
    var assessment_num = document.getElementById("na_assessment_num").value
    if (assessment_num =="")
	{
		$('#add_dim_btn').addClass('disable_a_href');
	}
	else
	{
		$('#add_dim_btn').removeClass('disable_a_href');
	}

} );
</script>
{% endblock content %}