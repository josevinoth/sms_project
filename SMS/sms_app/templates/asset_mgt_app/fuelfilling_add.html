{% extends "asset_mgt_app/base.html" %}
{% load widget_tweaks %}
{% block content %}

<form method="POST" action="" id="fuelfilling_add"   >
	{% csrf_token %}
	<div class="row">
		<div class="col-3"></div>
		<div class="col-6">
			<div class="container-fluid">
				<div class="card text-white bg-info mb-3" style="max-width: 100%;">
					<div class="card-header text-center"><h3>Add/Update Fuel Filling</h3></div>
					<div class="card-body bg-light" >
						<div class="row">
							<div class="col-12">
								<div class="input-group input-group-sm mb-3">
									<div class="input-group-prepend">
										<span class="input-group-text">Vehicle Number</span>
									</div>
									{% render_field form.ff_vehicle_num id="ff_vehicle_num" class="form-control " %}
								</div>
								<div class="input-group input-group-sm mb-3">
									<div class="input-group-prepend">
										<span class="input-group-text"> Fuel Rate/ltr</span>
									</div>
									{% render_field form.ff_fuel_rate id="ff_fuel_rate" class="form-control " %}
								</div>
								<div class="input-group input-group-sm mb-3">
									<div class="input-group-prepend">
										<span class="input-group-text">Filled ltr(s)</span>
									</div>
									{% render_field form.ff_filled_ltr id="ff_filled_ltr" onchange="change_charge_type()" class="form-control " %}
								</div>
								<div class="input-group input-group-sm mb-3">
									<div class="input-group-prepend">
										<span class="input-group-text"> Fuel Price (LKR)</span>
									</div>
									{% render_field form.ff_fuel_price id="ff_fuel_price" class="form-control disable_a_href" %}
								</div>
								<div class="input-group input-group-sm mb-3">
									<div class="input-group-prepend">
										<span class="input-group-text">Date</span>
									</div>
									{% render_field form.ff_date id="ff_date" type="Date" class="form-control" %}
								</div>
								<div class="input-group input-group-sm mb-3">
									<div class="input-group-prepend">
										<span class="input-group-text"> Bunk Name</span>
									</div>
									{% render_field form.ff_bunk_name id="ff_bunk_name" class="form-control " %}
								</div>
                                <div class="input-group input-group-sm mb-3">
									<div class="input-group-prepend">
										<span class="input-group-text"> City</span>
									</div>
									{% render_field form.ff_city id="ff_city" class="form-control " %}
								</div>
                                <div class="input-group input-group-sm mb-3">
									<div class="input-group-prepend">
										<span class="input-group-text"> Location</span>
									</div>
									{% render_field form.ff_loaction id="ff_loaction" class="form-control " %}
								</div>
								<div class="input-group input-group-sm mb-3">
									<div class="input-group-prepend">
										<span class="input-group-text">Odometer Reading At Filling</span>
									</div>
									{% render_field form.ff_odometer_reading id="ff_odometer_reading" class="form-control " %}
								</div>
								<div class="input-group input-group-sm mb-3">
									<div class="input-group-prepend">
										<span class="input-group-text">Remarks</span>
									</div>
									{% render_field form.ff_remarks id="ff_remarks"  class="form-control " %}
								</div>
								{% render_field form.ff_updated_by id="ff_updated_by" hidden="True" class="form-control" %}
							</div>
						</div>
						<div class="row">
							<div class="col-1"></div>
							<div class="col-10">
								<div class="message text-center">
									{% for message in messages %}
									<a {% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</a>
									{% endfor %}
								</div>
							</div>
							<div class="col-1"></div>
						</div>
						<button type="submit" class="btn btn-success "><i class="fas fa-check"></i> Submit</button>
						<a href="{% url 'fuelfilling_list' %}" class="btn btn-danger float-right">
							<i class="fas fa-times"></i> Cancel
						</a>
					</div>
				</div>
			</div>
		</div>
		<div class="col-2"></div>
	</div>
</form>
<script>
$(document).ready(function() {
	document.getElementById("ff_updated_by").value ='{{user_id}}';
	});
</script>

<script>
function change_charge_type() {
var rate_per_litre=parseFloat(document.getElementById("ff_fuel_rate").value) || 0;
var filled_litre=parseInt(document.getElementById("ff_filled_ltr").value) || 0;
var fuel_price=filled_litre*rate_per_litre
document.getElementById("ff_fuel_price").value=fuel_price.toFixed(2)
}
</script>
{% endblock content %}