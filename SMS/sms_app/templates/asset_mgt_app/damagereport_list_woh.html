{% block content %}
<br>
<hr>
<div class="container-fluid">
    <table id="image_list" class="table table-striped table-bordered">
        <thead class="thead-dark">
            <tr>
                <th>ID</th>
                <th>Image</th>
                <th>Time</th>
                 <th>Reference ID</th>
                <th>Delete</th>
            </tr>
        </thead>
        <tbody>
            {% for image in images %}
            <tr>
                <td>{{ image.id }}</td>
                <td>
                    {% if image.image %}
                    <img src="{{ image.image.url }}" alt="Captured Image" width="150">
                    {% endif %}
                </td>
                <td>{{ image.timestamp }}</td>
                <td>{{ image.reference}}</td>
                <td>
                    <form action="{% url 'image_delete' image.id %}" method="post" onsubmit="return confirm('Are you sure you want to delete this entry?');">
                        {% csrf_token %}
                        <button type="submit" class="btn btn-danger">
                            <i class="fas fa-trash-alt"></i>
                        </button>
                    </form>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

<script>
    $(document).ready(function() {
        $('#image_list').DataTable({
            order: [[0, 'desc']],  // Sorting by the first column (ID) in descending order
            dom: 'lBfrtip',
            buttons: [
                'copy', 'csv', 'excel', 'print'
            ],
        });
    });
</script>
{% endblock content %}
