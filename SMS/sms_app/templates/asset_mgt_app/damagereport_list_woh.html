{% block content %}
<br>
<hr>
    <div class="col-md-2">
        <!-- Button to open the modal -->
        <button id="open-camera-btn" class="btn btn-warning btn-block btn-lg" data-toggle="modal" data-target="#captureModal">
            <i class="fas fa-camera"></i> Capture Image
        </button>
    </div>

    <!-- Include the modal here or load via AJAX -->
    {% include 'asset_mgt_app/capture.html' %}

</div>
<br>
<div class="container-fluid">
    <table  id="image_list" class="table table-striped table-bordered">
        <thead class="thead-dark">
        <tr>
            <th>ID</th>
            <th>Image</th>
            <th>Time</th>
            <th>Reference ID</th>
<!--            <th>Edit</th>-->
            <th>Delete</th>
        </thead>
        <tbody>
        {% for image in images %}
        <tr>
            <td>{{ image.id }}</td>
            <td>
                {% if image.image %}
                <img src="{{ image.image.url }}" alt="Captured Image" width="150">
                {% endif %}
            </td>
            <td>{{ image.timestamp }}</td>
            <td>{{ image.reference}}</td>
<!--            <td>-->
<!--                <a class="btn btn-primary" href="{% url 'image_update' image.id %}">-->
<!--                    <i class="far fa-edit"></i>-->
<!--                </a>-->
<!--            </td>-->
            <td>
                <form action="{% url 'image_delete' image.id %}" method="post" onsubmit="return confirm('Are you sure you want to delete this entry?');">
                    {% csrf_token %}
                    <button type="submit" class="btn btn-danger">
                        <i class="fas fa-trash-alt"></i>
                    </button>
                </form>
            </td>
        </tr>
        {% endfor %}
        </tbody>
    </table>
</div>

<script>
    $(document).ready(function() {
        $('#image_list').DataTable({
            order: [[0, 'desc']],  // Sorting by the first column (ID) in descending order
            dom: 'lBfrtip',
            buttons: [
                'copy', 'csv', 'excel', 'print'
            ],
        });
    });
</script>
{% endblock content %}
