{% extends "asset_mgt_app/base.html" %}
{% load widget_tweaks %}
{% block content %}
<form method="POST" action="" enctype="multipart/form-data">
	{% csrf_token %}
	<div class="row">
		<div class="col-3"></div>
		<div class="col-6">
			<div class="container-fluid">
				<div class="card text-white bg-info mb-3" style="max-width: 100%;">
					<div class="card-header text-center"><h3>Add/Update Pre-Gatein</h3></div>
					<div class="card-body bg-light" >
						<div class="row">
							<div class="col">
								<div class="input-group input-group-sm mb-3">
									<div class="input-group-prepend">
										<span class="input-group-text">Pre Gate-In ID</span>
									</div>
									{% render_field gatein_pre_form.gatein_pre_number id="gatein_pre_number" class="form-control disable_a_href" %}
								</div>
								<div class="input-group input-group-sm mb-3">
									<div class="input-group-prepend">
										<span class="input-group-text">Branch</span>
									</div>
									{% render_field gatein_pre_form.gatein_pre_branch class="form-control disable_a_href" id="gatein_pre_branch" %}
								</div>
								{% render_field gatein_pre_form.gatein_pre_updated_by id="gatein_pre_updated_by" hidden="True" class="form-control" %}
								{% render_field gatein_pre_form.gatein_pre_truck_number id="gatein_pre_truck_number" hidden="True" class="form-control" %}
								{% render_field gatein_pre_form.gatein_pre_driver_name id="gatein_pre_driver_name" hidden="True" class="form-control" %}
								<div class="input-group input-group-sm mb-3">
									<div class="input-group-prepend">
										<span class="input-group-text">Shipment Details</span>
									</div>
									{% render_field gatein_pre_form.gatein_pre_shipment_att id="gatein_pre_shipment_att" class="form-control" %}
								</div>
								<div class="input-group input-group-sm mb-3">
									<div class="input-group-prepend">
										<span class="input-group-text">Customer Approval</span>
									</div>
									{% render_field gatein_pre_form.gatein_pre_cust_appr_att id="gatein_pre_cust_appr_att" class="form-control" %}
								</div>
								<div class="input-group input-group-sm mb-3">
									<div class="input-group-prepend">
										<span class="input-group-text">Status</span>
									</div>
									{% render_field gatein_pre_form.gatein_pre_status class="form-control" %}
								</div>
							</div>
						</div>
						<div class="row">
							<div class="col-1"></div>
							<div class="col-10">
								<div class="message text-center">
									{% for message in messages %}
									<a {% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</a>
									{% endfor %}
								</div>
							</div>
							<div class="col-1"></div>
						</div>
						<button type="submit" class="btn btn-success" ><i class="fas fa-check"></i> Save</button>
						<a href="{% url 'pre_gatein_search' %}" class="btn btn-danger float-right">
							<i class="fas fa-times"></i> Cancel
						</a>
					</div>
				</div>
			</div>
		</div>
	</div>
	<div class="col-3"></div>
	</div>
</form>
<div class="container-fluid row">
	<div class="col-md-1">
		<a href="{% url 'pregateintruck_insert' %}" id= "add_gateinpre" class="btn btn-success btn-block btn-lg">
			<i class="fas fa-plus"></i> Add
		</a>
	</div>
</div>
<hr>
<div class="container-fluid">
	<table id="pregateintruck_list" class="table table-striped table-bordered">
		<thead class="thead-dark">
		<tr>
			<th>Created On</th>
			<th>Pre-Gate-In #</th>
			<th>Transporter</th>
			<th>Truck Number</th>
			<th>Truck Type</th>
			<th>Driver Name</th>
			<th>Driver Number</th>
			<th>Driver DL Number</th>
			<th>OTL Type</th>
			<th>OTL Number</th>
			<th>Updated On</th>
			<th>Updated By</th>
			<th>Edit</th>
			<th>Delete</th>
		</thead>
		<tbody>
		{% for pregateintruckinfo in pregateintruck_list %}
		<tr>
			<td> {{pregateintruckinfo.pregatein_created_at}}</td>
			<td> {{pregateintruckinfo.pregatein_number}}</td>
			<td> {{pregateintruckinfo.pregatein_transporter}}</td>
			<td> {{pregateintruckinfo.pregatein_truck_number}}</td>
			<td> {{pregateintruckinfo.pregatein_truck_type}}</td>
			<td> {{pregateintruckinfo.pregatein_driver}}</td>
			<td> {{pregateintruckinfo.pregatein_contact_number}}</td>
			<td> {{pregateintruckinfo.pregatein_dl_number}}</td>
			<td> {{pregateintruckinfo.pregatein_otl_type}}</td>
			<td> {{pregateintruckinfo.pregatein_otl}}</td>
			<td> {{pregateintruckinfo.pregatein_updated_at}}</td>
			<td> {{pregateintruckinfo.pregatein_updated_by}}</td>
			<td>
				<a class="btn btn-primary" href="{% url 'pregateintruck_update' pregateintruckinfo.id %}" >
					<i class="far fa-edit"></i>
				</a>
			</td>
			<td>
				<form action="{% url 'pregateintruck_delete' pregateintruckinfo.id %}" method="post" onclick="return confirm('Are you sure?');">
					{% csrf_token %}
					<button type="submit" class="btn btn-danger">
						<i class="fas fa-trash-alt"></i>
					</button>
				</form>
			</td>
		</tr>
		{% endfor %}
		</tbody>
	</table>
</div>
<script>
    $(document).ready(function() {
    $('#gatein_list').DataTable({
        order: [1, 'desc' ],
        dom: 'lBfrtip',
        buttons: [
            'copy', 'csv', 'excel','print'
        ]
    });
    var gateinpre_num = document.getElementById("gatein_pre_number").value
    if (gateinpre_num =="")
	{
		$('#add_gateinpre').addClass('disable_a_href');
	}
	else
	{
		$('#add_gateinpre').removeClass('disable_a_href');
	}
	document.getElementById("gatein_pre_updated_by").value ='{{user_id}}';

	document.getElementById("gatein_pre_branch").value ='{{user_branch_id}}';
} );
</script>


{% endblock content %}